<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Example.Hefty.Disj+Once</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--overlapping-instances</a> <a id="37" class="Pragma">--instance-search-depth=10</a> <a id="64" class="Symbol">#-}</a>

<a id="69" class="Keyword">module</a> <a id="76" href="Example.Hefty.Disj%252BOnce.html" class="Module">Example.Hefty.Disj+Once</a> <a id="100" class="Keyword">where</a>

<a id="107" class="Keyword">open</a> <a id="112" class="Keyword">import</a> <a id="119" href="Level.html" class="Module">Level</a> <a id="125" class="Keyword">renaming</a> <a id="134" class="Symbol">(</a><a id="135" href="Agda.Primitive.html#764" class="Primitive">zero</a> <a id="140" class="Symbol">to</a> <a id="143" class="Primitive">ℓ0</a><a id="145" class="Symbol">)</a> <a id="147" class="Keyword">using</a> <a id="153" class="Symbol">()</a>
<a id="156" class="Keyword">open</a> <a id="161" class="Keyword">import</a> <a id="168" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="178" class="Keyword">open</a> <a id="183" class="Keyword">import</a> <a id="190" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="221" class="Keyword">using</a> <a id="227" class="Symbol">(</a><a id="228" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="232" class="Symbol">;</a> <a id="234" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="238" class="Symbol">;</a> <a id="240" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="245" class="Symbol">;</a> <a id="247" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a><a id="260" class="Symbol">)</a>
<a id="262" class="Keyword">open</a> <a id="267" class="Keyword">import</a> <a id="274" href="Data.List.html" class="Module">Data.List</a> <a id="284" class="Keyword">using</a> <a id="290" class="Symbol">(</a><a id="291" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="295" class="Symbol">;</a> <a id="297" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="300" class="Symbol">;</a> <a id="302" href="Data.List.Base.html#7182" class="InductiveConstructor">[]</a><a id="304" class="Symbol">;</a> <a id="306" href="Data.List.Base.html#8024" class="Function">head</a><a id="310" class="Symbol">)</a>
<a id="312" class="Keyword">open</a> <a id="317" class="Keyword">import</a> <a id="324" href="Data.Universe.html" class="Module">Data.Universe</a> <a id="338" class="Keyword">renaming</a> <a id="347" class="Symbol">(</a><a id="348" href="Data.Universe.html#396" class="Record">Universe</a> <a id="357" class="Symbol">to</a> <a id="360" class="Record">Univ</a><a id="364" class="Symbol">)</a>
<a id="366" class="Keyword">private</a> <a id="Universe"></a><a id="374" href="Example.Hefty.Disj%252BOnce.html#374" class="Function">Universe</a> <a id="383" class="Symbol">=</a> <a id="385" href="Example.Hefty.Disj%252BOnce.html#360" class="Record">Univ</a> <a id="390" href="Example.Hefty.Disj%252BOnce.html#143" class="Primitive">ℓ0</a> <a id="393" href="Example.Hefty.Disj%252BOnce.html#143" class="Primitive">ℓ0</a>
<a id="396" class="Keyword">open</a> <a id="401" href="Example.Hefty.Disj%252BOnce.html#360" class="Module">Univ</a> <a id="406" class="Symbol">⦃</a> <a id="408" class="Symbol">...</a> <a id="412" class="Symbol">⦄</a> <a id="414" class="Keyword">renaming</a> <a id="423" class="Symbol">(</a><a id="424" href="Data.Universe.html#447" class="Field">U</a> <a id="426" class="Symbol">to</a> <a id="429" class="Field">T</a><a id="430" class="Symbol">;</a> <a id="432" href="Data.Universe.html#477" class="Field">El</a> <a id="435" class="Symbol">to</a> <a id="438" class="Field">⟦_⟧</a><a id="441" class="Symbol">)</a>
<a id="443" class="Keyword">open</a> <a id="448" class="Keyword">import</a> <a id="455" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Free.html" class="Module">Free</a> <a id="511" class="Keyword">hiding</a> <a id="518" class="Symbol">(</a><a id="519" href="Free.html#2046" class="Function Operator">_&gt;&gt;=_</a><a id="524" class="Symbol">;</a> <a id="526" href="Free.html#2118" class="Function Operator">_&gt;&gt;_</a><a id="530" class="Symbol">)</a>
<a id="532" class="Keyword">open</a> <a id="537" class="Keyword">import</a> <a id="544" href="Free.Disj.html" class="Module">Free.Disj</a>
<a id="554" class="Keyword">open</a> <a id="559" class="Keyword">import</a> <a id="566" href="Free.Nil.html" class="Module">Free.Nil</a>

<a id="576" class="Keyword">open</a> <a id="581" class="Keyword">import</a> <a id="588" href="Hefty.html" class="Module">Hefty</a> <a id="594" class="Keyword">hiding</a> <a id="601" class="Symbol">(</a><a id="602" href="Hefty.html#2747" class="Function Operator">_&gt;&gt;=_</a><a id="607" class="Symbol">;</a> <a id="609" href="Hefty.html#2876" class="Function Operator">_&gt;&gt;_</a><a id="613" class="Symbol">)</a>
<a id="615" class="Keyword">open</a> <a id="620" class="Keyword">import</a> <a id="627" href="Hefty.Once.html" class="Module">Hefty.Once</a>
<a id="638" class="Keyword">open</a> <a id="643" class="Keyword">import</a> <a id="650" href="Hefty.Lift.html" class="Module">Hefty.Lift</a>
<a id="661" class="Keyword">open</a> <a id="666" class="Keyword">import</a> <a id="673" href="Hefty.Nil.html" class="Module">Hefty.Nil</a>


<a id="685" class="Comment">{-
A universe of types
-}</a>

<a id="712" class="Keyword">data</a> <a id="Type"></a><a id="717" href="Example.Hefty.Disj%252BOnce.html#717" class="Datatype">Type</a> <a id="722" class="Symbol">:</a> <a id="724" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="728" class="Keyword">where</a>
  <a id="Type.num"></a><a id="736" href="Example.Hefty.Disj%252BOnce.html#736" class="InductiveConstructor">num</a>   <a id="742" class="Symbol">:</a> <a id="744" href="Example.Hefty.Disj%252BOnce.html#717" class="Datatype">Type</a>
  <a id="Type.unit"></a><a id="751" href="Example.Hefty.Disj%252BOnce.html#751" class="InductiveConstructor">unit</a>  <a id="757" class="Symbol">:</a> <a id="759" href="Example.Hefty.Disj%252BOnce.html#717" class="Datatype">Type</a>

<a id="765" class="Keyword">private</a> <a id="773" class="Keyword">instance</a>
  <a id="OnceUniverse"></a><a id="784" href="Example.Hefty.Disj%252BOnce.html#784" class="Function">OnceUniverse</a> <a id="797" class="Symbol">:</a> <a id="799" href="Example.Hefty.Disj%252BOnce.html#374" class="Function">Universe</a>
  <a id="810" href="Example.Hefty.Disj%252BOnce.html#429" class="Field">T</a> <a id="812" class="Symbol">⦃</a> <a id="814" href="Example.Hefty.Disj%252BOnce.html#784" class="Function">OnceUniverse</a> <a id="827" class="Symbol">⦄</a> <a id="829" class="Symbol">=</a> <a id="831" href="Example.Hefty.Disj%252BOnce.html#717" class="Datatype">Type</a>
  <a id="838" href="Example.Hefty.Disj%252BOnce.html#438" class="Field Operator">⟦_⟧</a> <a id="842" class="Symbol">⦃</a> <a id="844" href="Example.Hefty.Disj%252BOnce.html#784" class="Function">OnceUniverse</a> <a id="857" class="Symbol">⦄</a> <a id="859" href="Example.Hefty.Disj%252BOnce.html#736" class="InductiveConstructor">num</a> <a id="863" class="Symbol">=</a> <a id="865" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="869" href="Example.Hefty.Disj%252BOnce.html#438" class="Field Operator">⟦_⟧</a> <a id="873" class="Symbol">⦃</a> <a id="875" href="Example.Hefty.Disj%252BOnce.html#784" class="Function">OnceUniverse</a> <a id="888" class="Symbol">⦄</a> <a id="890" href="Example.Hefty.Disj%252BOnce.html#751" class="InductiveConstructor">unit</a> <a id="895" class="Symbol">=</a> <a id="897" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>


<a id="901" class="Comment">{-
Example programs
-}</a>

<a id="ex-0or1"></a><a id="925" href="Example.Hefty.Disj%252BOnce.html#925" class="Function">ex-0or1</a> <a id="933" class="Symbol">:</a> <a id="935" href="Hefty.html#1785" class="Datatype">Hefty</a> <a id="941" class="Symbol">(</a><a id="942" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="947" href="Free.Disj.html#263" class="Function">Disj</a> <a id="952" href="Hefty.html#1151" class="Function Operator">∔</a> <a id="954" href="Hefty.Once.html#680" class="Function">Once</a> <a id="959" href="Hefty.html#1151" class="Function Operator">∔</a> <a id="961" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="966" href="Free.Nil.html#90" class="Function">Nil</a><a id="969" class="Symbol">)</a> <a id="971" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="973" href="Example.Hefty.Disj%252BOnce.html#925" class="Function">ex-0or1</a> <a id="981" class="Symbol">=</a> <a id="983" class="Symbol">(</a><a id="984" href="Hefty.html#1829" class="InductiveConstructor">pure</a> <a id="989" class="Number">0</a><a id="990" class="Symbol">)</a> <a id="992" href="Hefty.Once.html#865" class="Function Operator">‵orᴴ</a> <a id="997" class="Symbol">(</a><a id="998" href="Hefty.html#1829" class="InductiveConstructor">pure</a> <a id="1003" class="Number">1</a><a id="1004" class="Symbol">)</a>

<a id="ex-fail-once"></a><a id="1007" href="Example.Hefty.Disj%252BOnce.html#1007" class="Function">ex-fail-once</a> <a id="1020" class="Symbol">:</a> <a id="1022" href="Hefty.html#1785" class="Datatype">Hefty</a> <a id="1028" class="Symbol">(</a><a id="1029" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1034" href="Free.Disj.html#263" class="Function">Disj</a> <a id="1039" href="Hefty.html#1151" class="Function Operator">∔</a> <a id="1041" href="Hefty.Once.html#680" class="Function">Once</a> <a id="1046" href="Hefty.html#1151" class="Function Operator">∔</a> <a id="1048" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1053" href="Free.Nil.html#90" class="Function">Nil</a><a id="1056" class="Symbol">)</a> <a id="1058" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="1060" href="Example.Hefty.Disj%252BOnce.html#1007" class="Function">ex-fail-once</a> <a id="1073" class="Symbol">=</a> <a id="1075" class="Keyword">do</a>
  <a id="1080" href="Example.Hefty.Disj%252BOnce.html#1080" class="Bound">r</a> <a id="1082" href="Hefty.html#2747" class="Function Operator">←</a> <a id="1084" href="Hefty.Once.html#1175" class="Function">‵once</a> <a id="1090" href="Example.Hefty.Disj%252BOnce.html#925" class="Function">ex-0or1</a>
  <a id="1100" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="1103" href="Example.Hefty.Disj%252BOnce.html#1080" class="Bound">r</a> <a id="1105" href="Data.Nat.Base.html#1116" class="Primitive Operator">≡ᵇ</a> <a id="1108" class="Number">0</a> <a id="1110" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="1115" href="Hefty.Once.html#1029" class="Function">‵failᴴ</a> <a id="1122" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="1127" href="Hefty.html#1829" class="InductiveConstructor">pure</a> <a id="1132" href="Example.Hefty.Disj%252BOnce.html#1080" class="Bound">r</a>
  <a id="1136" class="Keyword">where</a> <a id="1142" class="Keyword">open</a> <a id="1147" class="Keyword">import</a> <a id="1154" href="Hefty.html" class="Module">Hefty</a> <a id="1160" class="Keyword">using</a> <a id="1166" class="Symbol">(</a><a id="1167" href="Hefty.html#2747" class="Function Operator">_&gt;&gt;=_</a><a id="1172" class="Symbol">)</a>


<a id="1176" class="Comment">{-
Automatic elaboration
-}</a>

<a id="once-elab"></a><a id="1205" href="Example.Hefty.Disj%252BOnce.html#1205" class="Function">once-elab</a> <a id="1215" class="Symbol">:</a> <a id="1217" href="Hefty.html#10044" class="Record">Elab</a> <a id="1222" class="Symbol">(</a><a id="1223" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1228" href="Free.Disj.html#263" class="Function">Disj</a> <a id="1233" href="Hefty.html#1151" class="Function Operator">∔</a> <a id="1235" href="Hefty.Once.html#680" class="Function">Once</a> <a id="1240" href="Hefty.html#1151" class="Function Operator">∔</a> <a id="1242" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1247" href="Free.Nil.html#90" class="Function">Nil</a><a id="1250" class="Symbol">)</a> <a id="1252" class="Symbol">(</a><a id="1253" href="Free.Disj.html#263" class="Function">Disj</a> <a id="1258" href="Free.html#991" class="Function Operator">⊕</a> <a id="1260" href="Free.Nil.html#90" class="Function">Nil</a><a id="1263" class="Symbol">)</a>
<a id="1265" href="Example.Hefty.Disj%252BOnce.html#1205" class="Function">once-elab</a> <a id="1275" class="Symbol">=</a> <a id="1277" href="Hefty.html#10216" class="Function">auto-elab</a>


<a id="1289" class="Comment">{-
Tests
-}</a>

<a id="test-ex-0or1"></a><a id="1302" href="Example.Hefty.Disj%252BOnce.html#1302" class="Function">test-ex-0or1</a> <a id="1315" class="Symbol">:</a> <a id="1317" href="Free.Nil.html#168" class="Function">end</a> <a id="1321" class="Symbol">(</a><a id="1322" href="Free.html#7756" class="Function">handle₀</a> <a id="1330" href="Free.Disj.html#616" class="Function">hDisj</a> <a id="1336" class="Symbol">(</a><a id="1337" href="Hefty.html#10139" class="Function">elab</a> <a id="1342" href="Example.Hefty.Disj%252BOnce.html#1205" class="Function">once-elab</a> <a id="1352" href="Example.Hefty.Disj%252BOnce.html#925" class="Function">ex-0or1</a><a id="1359" class="Symbol">))</a> <a id="1362" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1364" class="Number">0</a> <a id="1366" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1368" class="Number">1</a> <a id="1370" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1372" class="InductiveConstructor">[]</a>
<a id="1375" href="Example.Hefty.Disj%252BOnce.html#1302" class="Function">test-ex-0or1</a> <a id="1388" class="Symbol">=</a> <a id="1390" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="test-fail-once"></a><a id="1396" href="Example.Hefty.Disj%252BOnce.html#1396" class="Function">test-fail-once</a> <a id="1411" class="Symbol">:</a> <a id="1413" href="Free.Nil.html#168" class="Function">end</a> <a id="1417" class="Symbol">(</a><a id="1418" href="Free.html#7756" class="Function">handle₀</a> <a id="1426" href="Free.Disj.html#616" class="Function">hDisj</a> <a id="1432" class="Symbol">(</a><a id="1433" href="Hefty.html#10139" class="Function">elab</a> <a id="1438" href="Example.Hefty.Disj%252BOnce.html#1205" class="Function">once-elab</a> <a id="1448" href="Example.Hefty.Disj%252BOnce.html#1007" class="Function">ex-fail-once</a><a id="1460" class="Symbol">))</a> <a id="1463" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1465" class="InductiveConstructor">[]</a>
<a id="1468" href="Example.Hefty.Disj%252BOnce.html#1396" class="Function">test-fail-once</a> <a id="1483" class="Symbol">=</a> <a id="1485" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre></body></html>