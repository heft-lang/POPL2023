<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Free.Output</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Free.Output.html" class="Module">Free.Output</a> <a id="20" class="Keyword">where</a>

<a id="27" class="Keyword">open</a> <a id="32" class="Keyword">import</a> <a id="39" href="Function.html" class="Module">Function</a>
<a id="48" class="Keyword">open</a> <a id="53" class="Keyword">import</a> <a id="60" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="70" class="Keyword">open</a> <a id="75" class="Keyword">import</a> <a id="82" href="Data.Product.html" class="Module">Data.Product</a>
<a id="95" class="Keyword">open</a> <a id="100" class="Keyword">import</a> <a id="107" href="Data.String.html" class="Module">Data.String</a>

<a id="120" class="Keyword">open</a> <a id="125" class="Keyword">import</a> <a id="132" href="Free.html" class="Module">Free</a>


<a id="139" class="Comment">{-
Operation
-}</a>

<a id="156" class="Keyword">data</a> <a id="OutOp"></a><a id="161" href="Free.Output.html#161" class="Datatype">OutOp</a> <a id="167" class="Symbol">:</a> <a id="169" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="173" class="Keyword">where</a>
  <a id="OutOp.out"></a><a id="181" href="Free.Output.html#181" class="InductiveConstructor">out</a> <a id="185" class="Symbol">:</a> <a id="187" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="194" class="Symbol">→</a> <a id="196" href="Free.Output.html#161" class="Datatype">OutOp</a>


<a id="204" class="Comment">{-
Effect signature
-}</a>

<a id="Output"></a><a id="228" href="Free.Output.html#228" class="Function">Output</a> <a id="235" class="Symbol">:</a> <a id="237" href="Free.html#787" class="Record">Effect</a>
<a id="244" href="Free.html#816" class="Field">Op</a> <a id="247" href="Free.Output.html#228" class="Function">Output</a> <a id="254" class="Symbol">=</a> <a id="256" href="Free.Output.html#161" class="Datatype">OutOp</a>
<a id="262" href="Free.html#836" class="Field">Ret</a> <a id="266" href="Free.Output.html#228" class="Function">Output</a> <a id="273" class="Symbol">(</a><a id="274" href="Free.Output.html#181" class="InductiveConstructor">out</a> <a id="278" href="Free.Output.html#278" class="Bound">s</a><a id="279" class="Symbol">)</a> <a id="281" class="Symbol">=</a> <a id="283" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>


<a id="287" class="Comment">{-
Smart constructor
-}</a>

<a id="‵out"></a><a id="312" href="Free.Output.html#312" class="Function">‵out</a> <a id="317" class="Symbol">:</a> <a id="319" class="Symbol">⦃</a> <a id="321" href="Free.html#882" class="Generalizable">Δ</a> <a id="323" href="Free.html#3485" class="Datatype Operator">∼</a> <a id="325" href="Free.Output.html#228" class="Function">Output</a> <a id="332" href="Free.html#3485" class="Datatype Operator">▸</a> <a id="334" href="Free.html#884" class="Generalizable">Δ′</a> <a id="337" class="Symbol">⦄</a> <a id="339" class="Symbol">→</a> <a id="341" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="348" class="Symbol">→</a> <a id="350" href="Free.html#1508" class="Datatype">Free</a> <a id="355" href="Free.html#882" class="Generalizable">Δ</a> <a id="357" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
<a id="359" href="Free.Output.html#312" class="Function">‵out</a> <a id="364" class="Symbol">⦃</a> <a id="366" href="Free.Output.html#366" class="Bound">w</a> <a id="368" class="Symbol">⦄</a> <a id="370" href="Free.Output.html#370" class="Bound">s</a> <a id="372" class="Symbol">=</a> <a id="374" href="Free.html#1612" class="InductiveConstructor">impure</a> <a id="381" class="Symbol">(</a><a id="382" href="Free.html#4103" class="Function">inj▸ₗ</a> <a id="388" class="Symbol">(</a><a id="389" href="Free.Output.html#181" class="InductiveConstructor">out</a> <a id="393" href="Free.Output.html#370" class="Bound">s</a><a id="394" class="Symbol">))</a> <a id="397" class="Symbol">(</a><a id="398" href="Free.html#1550" class="InductiveConstructor">pure</a> <a id="403" href="Function.Base.html#1106" class="Function Operator">∘</a> <a id="405" href="Free.html#4325" class="Function">proj-ret▸ₗ</a> <a id="416" class="Symbol">⦃</a> <a id="418" href="Free.Output.html#366" class="Bound">w</a> <a id="420" class="Symbol">⦄)</a>


<a id="425" class="Comment">{-
Handler
-}</a>

<a id="hOut"></a><a id="440" href="Free.Output.html#440" class="Function">hOut</a> <a id="445" class="Symbol">:</a> <a id="447" href="Free.html#7015" class="Record Operator">⟨</a> <a id="449" href="Free.html#469" class="Generalizable">A</a> <a id="451" href="Free.html#7015" class="Record Operator">!</a> <a id="453" href="Free.Output.html#228" class="Function">Output</a> <a id="460" href="Free.html#7015" class="Record Operator">⇒</a> <a id="462" href="Free.html#483" class="Generalizable">P</a> <a id="464" href="Free.html#7015" class="Record Operator">⇒</a> <a id="466" class="Symbol">(</a><a id="467" href="Free.html#469" class="Generalizable">A</a> <a id="469" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="471" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="477" class="Symbol">)</a> <a id="479" href="Free.html#7015" class="Record Operator">!</a> <a id="481" href="Free.html#884" class="Generalizable">Δ′</a> <a id="484" href="Free.html#7015" class="Record Operator">⟩</a>
<a id="486" href="Free.html#7106" class="Field">ret</a>  <a id="491" href="Free.Output.html#440" class="Function">hOut</a> <a id="496" href="Free.Output.html#496" class="Bound">x</a> <a id="498" class="Symbol">_</a>          <a id="509" class="Symbol">=</a> <a id="511" href="Free.html#1550" class="InductiveConstructor">pure</a> <a id="516" class="Symbol">(</a><a id="517" href="Free.Output.html#496" class="Bound">x</a> <a id="519" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="521" class="String">&quot;&quot;</a><a id="523" class="Symbol">)</a>
<a id="525" href="Free.html#7140" class="Field">hdl</a>  <a id="530" href="Free.Output.html#440" class="Function">hOut</a> <a id="535" class="Symbol">(</a><a id="536" href="Free.Output.html#181" class="InductiveConstructor">out</a> <a id="540" href="Free.Output.html#540" class="Bound">s</a><a id="541" class="Symbol">)</a> <a id="543" href="Free.Output.html#543" class="Bound">k</a> <a id="545" href="Free.Output.html#545" class="Bound">p</a>  <a id="548" class="Symbol">=</a> <a id="550" class="Keyword">do</a> <a id="553" class="Symbol">(</a><a id="554" href="Free.Output.html#554" class="Bound">v</a> <a id="556" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="558" href="Free.Output.html#558" class="Bound">s′</a><a id="560" class="Symbol">)</a> <a id="562" href="Free.html#2048" class="Function Operator">←</a> <a id="564" href="Free.Output.html#543" class="Bound">k</a> <a id="566" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="569" href="Free.Output.html#545" class="Bound">p</a><a id="570" class="Symbol">;</a> <a id="572" href="Free.html#1550" class="InductiveConstructor">pure</a> <a id="577" class="Symbol">(</a><a id="578" href="Free.Output.html#554" class="Bound">v</a> <a id="580" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="582" href="Free.Output.html#540" class="Bound">s</a> <a id="584" href="Data.String.Base.html#2404" class="Function Operator">++</a> <a id="587" href="Free.Output.html#558" class="Bound">s′</a><a id="589" class="Symbol">)</a>


<a id="593" class="Comment">{-
Handler that censors
-}</a>

<a id="hOut′"></a><a id="621" href="Free.Output.html#621" class="Function">hOut′</a> <a id="627" class="Symbol">:</a> <a id="629" class="Symbol">(</a><a id="630" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="637" class="Symbol">→</a> <a id="639" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="645" class="Symbol">)</a> <a id="647" class="Symbol">→</a> <a id="649" href="Free.html#7015" class="Record Operator">⟨</a> <a id="651" href="Free.html#469" class="Generalizable">A</a> <a id="653" href="Free.html#7015" class="Record Operator">!</a> <a id="655" href="Free.Output.html#228" class="Function">Output</a> <a id="662" href="Free.html#7015" class="Record Operator">⇒</a> <a id="664" href="Free.html#483" class="Generalizable">P</a> <a id="666" href="Free.html#7015" class="Record Operator">⇒</a> <a id="668" class="Symbol">(</a><a id="669" href="Free.html#469" class="Generalizable">A</a> <a id="671" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="673" href="Agda.Builtin.String.html#336" class="Postulate">String</a><a id="679" class="Symbol">)</a> <a id="681" href="Free.html#7015" class="Record Operator">!</a> <a id="683" href="Free.html#884" class="Generalizable">Δ′</a> <a id="686" href="Free.html#7015" class="Record Operator">⟩</a>
<a id="688" href="Free.html#7106" class="Field">ret</a>  <a id="693" class="Symbol">(</a><a id="694" href="Free.Output.html#621" class="Function">hOut′</a> <a id="700" href="Free.Output.html#700" class="Bound">f</a><a id="701" class="Symbol">)</a> <a id="703" href="Free.Output.html#703" class="Bound">x</a> <a id="705" class="Symbol">_</a>          <a id="716" class="Symbol">=</a> <a id="718" href="Free.html#1550" class="InductiveConstructor">pure</a> <a id="723" class="Symbol">(</a><a id="724" href="Free.Output.html#703" class="Bound">x</a> <a id="726" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="728" class="String">&quot;&quot;</a><a id="730" class="Symbol">)</a>
<a id="732" href="Free.html#7140" class="Field">hdl</a>  <a id="737" class="Symbol">(</a><a id="738" href="Free.Output.html#621" class="Function">hOut′</a> <a id="744" href="Free.Output.html#744" class="Bound">f</a><a id="745" class="Symbol">)</a> <a id="747" class="Symbol">(</a><a id="748" href="Free.Output.html#181" class="InductiveConstructor">out</a> <a id="752" href="Free.Output.html#752" class="Bound">s</a><a id="753" class="Symbol">)</a> <a id="755" href="Free.Output.html#755" class="Bound">k</a> <a id="757" href="Free.Output.html#757" class="Bound">p</a>  <a id="760" class="Symbol">=</a> <a id="762" class="Keyword">do</a> <a id="765" class="Symbol">(</a><a id="766" href="Free.Output.html#766" class="Bound">v</a> <a id="768" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="770" href="Free.Output.html#770" class="Bound">s′</a><a id="772" class="Symbol">)</a> <a id="774" href="Free.html#2048" class="Function Operator">←</a> <a id="776" href="Free.Output.html#755" class="Bound">k</a> <a id="778" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="781" href="Free.Output.html#757" class="Bound">p</a><a id="782" class="Symbol">;</a> <a id="784" href="Free.html#1550" class="InductiveConstructor">pure</a> <a id="789" class="Symbol">(</a><a id="790" href="Free.Output.html#766" class="Bound">v</a> <a id="792" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="794" class="Symbol">(</a><a id="795" href="Free.Output.html#744" class="Bound">f</a> <a id="797" href="Free.Output.html#752" class="Bound">s</a><a id="798" class="Symbol">)</a> <a id="800" href="Data.String.Base.html#2404" class="Function Operator">++</a> <a id="803" href="Free.Output.html#770" class="Bound">s′</a><a id="805" class="Symbol">)</a>
</pre></body></html>