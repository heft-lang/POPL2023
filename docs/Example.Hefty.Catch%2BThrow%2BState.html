<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Example.Hefty.Catch+Throw+State</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--overlapping-instances</a> <a id="37" class="Pragma">--instance-search-depth=10</a> <a id="64" class="Symbol">#-}</a>

<a id="69" class="Keyword">module</a> <a id="76" href="Example.Hefty.Catch%252BThrow%252BState.html" class="Module">Example.Hefty.Catch+Throw+State</a> <a id="108" class="Keyword">where</a>

<a id="115" class="Keyword">open</a> <a id="120" class="Keyword">import</a> <a id="127" href="Function.html" class="Module">Function</a>
<a id="136" class="Keyword">open</a> <a id="141" class="Keyword">import</a> <a id="148" href="Level.html" class="Module">Level</a> <a id="154" class="Keyword">renaming</a> <a id="163" class="Symbol">(</a><a id="164" href="Agda.Primitive.html#764" class="Primitive">zero</a> <a id="169" class="Symbol">to</a> <a id="172" class="Primitive">ℓ0</a><a id="174" class="Symbol">)</a> <a id="176" class="Keyword">using</a> <a id="182" class="Symbol">()</a>
<a id="185" class="Keyword">open</a> <a id="190" class="Keyword">import</a> <a id="197" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="230" class="Keyword">open</a> <a id="235" class="Keyword">import</a> <a id="242" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="252" class="Keyword">using</a> <a id="258" class="Symbol">(</a><a id="259" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="263" class="Symbol">;</a> <a id="265" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="269" class="Symbol">;</a> <a id="271" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="276" class="Symbol">)</a>
<a id="278" class="Keyword">open</a> <a id="283" class="Keyword">import</a> <a id="290" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="301" class="Keyword">using</a> <a id="307" class="Symbol">(</a><a id="308" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a><a id="312" class="Symbol">;</a> <a id="314" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a><a id="321" class="Symbol">)</a>
<a id="323" class="Keyword">open</a> <a id="328" class="Keyword">import</a> <a id="335" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Data.Universe.html" class="Module">Data.Universe</a> <a id="370" class="Keyword">renaming</a> <a id="379" class="Symbol">(</a><a id="380" href="Data.Universe.html#396" class="Record">Universe</a> <a id="389" class="Symbol">to</a> <a id="392" class="Record">Univ</a><a id="396" class="Symbol">)</a>
<a id="398" class="Keyword">private</a> <a id="Universe"></a><a id="406" href="Example.Hefty.Catch%252BThrow%252BState.html#406" class="Function">Universe</a> <a id="415" class="Symbol">=</a> <a id="417" href="Example.Hefty.Catch%252BThrow%252BState.html#392" class="Record">Univ</a> <a id="422" href="Example.Hefty.Catch%252BThrow%252BState.html#172" class="Primitive">ℓ0</a> <a id="425" href="Example.Hefty.Catch%252BThrow%252BState.html#172" class="Primitive">ℓ0</a>
<a id="428" class="Keyword">open</a> <a id="433" href="Example.Hefty.Catch%252BThrow%252BState.html#392" class="Module">Univ</a> <a id="438" class="Symbol">⦃</a> <a id="440" class="Symbol">...</a> <a id="444" class="Symbol">⦄</a> <a id="446" class="Keyword">renaming</a> <a id="455" class="Symbol">(</a><a id="456" href="Data.Universe.html#447" class="Field">U</a> <a id="458" class="Symbol">to</a> <a id="461" class="Field">Ty</a><a id="463" class="Symbol">;</a> <a id="465" href="Data.Universe.html#477" class="Field">El</a> <a id="468" class="Symbol">to</a> <a id="471" class="Field">⟦_⟧</a><a id="474" class="Symbol">)</a>
<a id="476" class="Keyword">open</a> <a id="481" class="Keyword">import</a> <a id="488" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="526" class="Keyword">open</a> <a id="531" class="Keyword">import</a> <a id="538" href="Function.Construct.Identity.html" class="Module">Function.Construct.Identity</a> <a id="566" class="Keyword">using</a> <a id="572" class="Symbol">(</a><a id="573" href="Function.Construct.Identity.html#4286" class="Function">↔-id</a><a id="577" class="Symbol">)</a>

<a id="580" class="Keyword">open</a> <a id="585" class="Keyword">import</a> <a id="592" href="Hefty.html" class="Module">Hefty</a> <a id="598" class="Keyword">hiding</a> <a id="605" class="Symbol">(</a><a id="606" href="Hefty.html#2772" class="Function Operator">_&gt;&gt;=_</a><a id="611" class="Symbol">;</a> <a id="613" href="Hefty.html#2901" class="Function Operator">_&gt;&gt;_</a><a id="617" class="Symbol">)</a>
<a id="619" class="Keyword">open</a> <a id="624" class="Keyword">import</a> <a id="631" href="Hefty.Lift.html" class="Module">Hefty.Lift</a>
<a id="642" class="Keyword">open</a> <a id="647" class="Keyword">import</a> <a id="654" href="Hefty.Catch.html" class="Module">Hefty.Catch</a>
<a id="666" class="Keyword">open</a> <a id="671" class="Keyword">import</a> <a id="678" href="Hefty.Nil.html" class="Module">Hefty.Nil</a>

<a id="689" class="Keyword">open</a> <a id="694" class="Keyword">import</a> <a id="701" href="Free.html" class="Module">Free</a> <a id="706" class="Keyword">hiding</a> <a id="713" class="Symbol">(</a><a id="714" href="Free.html#2048" class="Function Operator">_&gt;&gt;=_</a><a id="719" class="Symbol">;</a> <a id="721" href="Free.html#2120" class="Function Operator">_&gt;&gt;_</a><a id="725" class="Symbol">)</a>
<a id="727" class="Keyword">open</a> <a id="732" class="Keyword">import</a> <a id="739" href="Free.Throw.html" class="Module">Free.Throw</a>
<a id="750" class="Keyword">open</a> <a id="755" class="Keyword">import</a> <a id="762" href="Free.State.html" class="Module">Free.State</a> <a id="773" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="775" class="Keyword">open</a> <a id="780" class="Keyword">import</a> <a id="787" href="Free.SubJump.html" class="Module">Free.SubJump</a>
<a id="800" class="Keyword">open</a> <a id="805" class="Keyword">import</a> <a id="812" href="Free.Nil.html" class="Module">Free.Nil</a>


<a id="823" class="Comment">{-
A universe of types polymorphic program with state and exceptions.  Under a
&quot;global state&quot; semantics of exception handling, the program returns 2.  Under a
&quot;transactional state&quot; semantics of exception handling, the program returns 1.
-}</a>

<a id="1064" class="Keyword">module</a> <a id="1071" href="Example.Hefty.Catch%252BThrow%252BState.html#1071" class="Module">_</a> <a id="1073" class="Symbol">⦃</a> <a id="1075" href="Example.Hefty.Catch%252BThrow%252BState.html#1075" class="Bound">u</a> <a id="1077" class="Symbol">:</a> <a id="1079" href="Example.Hefty.Catch%252BThrow%252BState.html#406" class="Function">Universe</a> <a id="1088" class="Symbol">⦄</a> <a id="1090" class="Symbol">{</a><a id="1091" href="Example.Hefty.Catch%252BThrow%252BState.html#1091" class="Bound">unit</a> <a id="1096" class="Symbol">:</a> <a id="1098" href="Example.Hefty.Catch%252BThrow%252BState.html#461" class="Field">Ty</a><a id="1100" class="Symbol">}</a> <a id="1102" class="Symbol">⦃</a> <a id="1104" href="Example.Hefty.Catch%252BThrow%252BState.html#1104" class="Bound">iso</a> <a id="1108" class="Symbol">:</a> <a id="1110" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟦</a> <a id="1112" href="Example.Hefty.Catch%252BThrow%252BState.html#1091" class="Bound">unit</a> <a id="1117" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟧</a> <a id="1119" href="Function.Bundles.html#9221" class="Function Operator">↔</a> <a id="1121" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="1123" class="Symbol">⦄</a> <a id="1125" class="Keyword">where</a>

  <a id="1134" class="Keyword">open</a> <a id="1139" class="Keyword">import</a> <a id="1146" href="Hefty.html" class="Module">Hefty</a> <a id="1152" class="Keyword">using</a> <a id="1158" class="Symbol">(</a><a id="1159" href="Hefty.html#2772" class="Function Operator">_&gt;&gt;=_</a><a id="1164" class="Symbol">;</a> <a id="1166" href="Hefty.html#2901" class="Function Operator">_&gt;&gt;_</a><a id="1170" class="Symbol">)</a>
  <a id="1174" class="Keyword">open</a> <a id="1179" href="Function.Bundles.html#6049" class="Module">Inverse</a> <a id="1187" class="Symbol">⦃</a> <a id="1189" class="Symbol">...</a> <a id="1193" class="Symbol">⦄</a>

  <a id="1198" href="Example.Hefty.Catch%252BThrow%252BState.html#1198" class="Function">transact</a> <a id="1207" class="Symbol">:</a> <a id="1209" class="Symbol">⦃</a> <a id="1211" href="Example.Hefty.Catch%252BThrow%252BState.html#1211" class="Bound">wₛ</a> <a id="1214" class="Symbol">:</a> <a id="1216" href="Hefty.html#1027" class="Generalizable">H</a> <a id="1218" href="Hefty.html#4021" class="Datatype Operator">∼</a> <a id="1220" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1225" href="Free.State.html#391" class="Function">State</a> <a id="1231" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="1233" href="Hefty.html#1029" class="Generalizable">H′</a> <a id="1236" class="Symbol">⦄</a> <a id="1238" class="Symbol">⦃</a> <a id="1240" href="Example.Hefty.Catch%252BThrow%252BState.html#1240" class="Bound">wₜ</a> <a id="1243" class="Symbol">:</a> <a id="1245" href="Hefty.html#1027" class="Generalizable">H</a> <a id="1247" href="Hefty.html#4021" class="Datatype Operator">∼</a>  <a id="1250" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1255" href="Free.Throw.html#229" class="Function">Throw</a> <a id="1261" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="1263" href="Hefty.html#1032" class="Generalizable">H″</a> <a id="1266" class="Symbol">⦄</a> <a id="1268" class="Symbol">⦃</a> <a id="1270" href="Example.Hefty.Catch%252BThrow%252BState.html#1270" class="Bound">w</a>  <a id="1273" class="Symbol">:</a> <a id="1275" href="Hefty.html#1027" class="Generalizable">H</a> <a id="1277" href="Hefty.html#4021" class="Datatype Operator">∼</a> <a id="1279" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="1285" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="1287" href="Hefty.html#1035" class="Generalizable">H‴</a> <a id="1290" class="Symbol">⦄</a>
           <a id="1303" class="Symbol">→</a> <a id="1305" href="Hefty.html#1799" class="Datatype">Hefty</a> <a id="1311" href="Hefty.html#1027" class="Generalizable">H</a> <a id="1313" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="1317" href="Example.Hefty.Catch%252BThrow%252BState.html#1198" class="Function">transact</a> <a id="1326" class="Symbol">=</a> <a id="1328" class="Keyword">do</a>
    <a id="1335" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="1337" href="Free.State.html#306" class="InductiveConstructor">put</a> <a id="1341" class="Number">1</a>
    <a id="1347" href="Hefty.Catch.html#837" class="Function">‵catch</a> <a id="1354" class="Symbol">(</a><a id="1355" class="Keyword">do</a> <a id="1358" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="1360" href="Free.State.html#306" class="InductiveConstructor">put</a> <a id="1364" class="Number">2</a><a id="1365" class="Symbol">;</a> <a id="1367" href="Hefty.Catch.html#1396" class="Function">‵throwᴴ</a><a id="1374" class="Symbol">)</a> <a id="1376" class="Symbol">(</a><a id="1377" href="Hefty.html#1843" class="InductiveConstructor">pure</a> <a id="1382" class="Symbol">(</a><a id="1383" href="Function.Bundles.html#6127" class="Field">from</a> <a id="1388" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1390" class="Symbol">))</a>
    <a id="1397" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="1399" href="Free.State.html#326" class="InductiveConstructor">get</a>



<a id="1406" class="Comment">{-
A simple universe of types
-}</a>

<a id="1440" class="Keyword">data</a> <a id="Type"></a><a id="1445" href="Example.Hefty.Catch%252BThrow%252BState.html#1445" class="Datatype">Type</a> <a id="1450" class="Symbol">:</a> <a id="1452" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1456" class="Keyword">where</a>
  <a id="Type.unit"></a><a id="1464" href="Example.Hefty.Catch%252BThrow%252BState.html#1464" class="InductiveConstructor">unit</a>  <a id="1470" class="Symbol">:</a> <a id="1472" href="Example.Hefty.Catch%252BThrow%252BState.html#1445" class="Datatype">Type</a>
  <a id="Type.num"></a><a id="1479" href="Example.Hefty.Catch%252BThrow%252BState.html#1479" class="InductiveConstructor">num</a>   <a id="1485" class="Symbol">:</a> <a id="1487" href="Example.Hefty.Catch%252BThrow%252BState.html#1445" class="Datatype">Type</a>

<a id="1493" class="Keyword">instance</a>
  <a id="TypeUniverse"></a><a id="1504" href="Example.Hefty.Catch%252BThrow%252BState.html#1504" class="Function">TypeUniverse</a> <a id="1517" class="Symbol">:</a> <a id="1519" href="Example.Hefty.Catch%252BThrow%252BState.html#406" class="Function">Universe</a>
  <a id="1530" href="Example.Hefty.Catch%252BThrow%252BState.html#461" class="Field">Ty</a>  <a id="1534" class="Symbol">⦃</a> <a id="1536" href="Example.Hefty.Catch%252BThrow%252BState.html#1504" class="Function">TypeUniverse</a> <a id="1549" class="Symbol">⦄</a> <a id="1551" class="Symbol">=</a> <a id="1553" href="Example.Hefty.Catch%252BThrow%252BState.html#1445" class="Datatype">Type</a>
  <a id="1560" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟦_⟧</a> <a id="1564" class="Symbol">⦃</a> <a id="1566" href="Example.Hefty.Catch%252BThrow%252BState.html#1504" class="Function">TypeUniverse</a> <a id="1579" class="Symbol">⦄</a> <a id="1581" href="Example.Hefty.Catch%252BThrow%252BState.html#1464" class="InductiveConstructor">unit</a> <a id="1586" class="Symbol">=</a> <a id="1588" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="1592" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟦_⟧</a> <a id="1596" class="Symbol">⦃</a> <a id="1598" href="Example.Hefty.Catch%252BThrow%252BState.html#1504" class="Function">TypeUniverse</a> <a id="1611" class="Symbol">⦄</a> <a id="1613" href="Example.Hefty.Catch%252BThrow%252BState.html#1479" class="InductiveConstructor">num</a>  <a id="1618" class="Symbol">=</a> <a id="1620" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>

  <a id="iso-unit"></a><a id="1625" href="Example.Hefty.Catch%252BThrow%252BState.html#1625" class="Function">iso-unit</a> <a id="1634" class="Symbol">:</a> <a id="1636" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟦</a> <a id="1638" href="Example.Hefty.Catch%252BThrow%252BState.html#1464" class="InductiveConstructor">unit</a> <a id="1643" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟧</a> <a id="1645" href="Function.Bundles.html#9221" class="Function Operator">↔</a> <a id="1647" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="1651" href="Example.Hefty.Catch%252BThrow%252BState.html#1625" class="Function">iso-unit</a> <a id="1660" class="Symbol">=</a> <a id="1662" href="Function.Construct.Identity.html#4286" class="Function">↔-id</a> <a id="1667" class="Symbol">_</a>



<a id="1672" class="Comment">{-
A global state interpretation of the program
-}</a>

<a id="1724" class="Keyword">module</a> <a id="GlobalStateInterpretation"></a><a id="1731" href="Example.Hefty.Catch%252BThrow%252BState.html#1731" class="Module">GlobalStateInterpretation</a> <a id="1757" class="Keyword">where</a>

  <a id="1766" class="Comment">{-
  Building elaboration from component parts
  -}</a>

  <a id="GlobalStateInterpretation.transact-elab"></a><a id="1821" href="Example.Hefty.Catch%252BThrow%252BState.html#1821" class="Function">transact-elab</a> <a id="1835" class="Symbol">:</a> <a id="1837" href="Hefty.html#9660" class="Function">Elaboration</a> <a id="1849" class="Symbol">(</a><a id="1850" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1855" href="Free.State.html#391" class="Function">State</a> <a id="1861" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="1863" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1868" href="Free.Throw.html#229" class="Function">Throw</a> <a id="1874" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="1876" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="1882" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="1884" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="1889" href="Free.Nil.html#90" class="Function">Nil</a><a id="1892" class="Symbol">)</a> <a id="1894" class="Symbol">(</a><a id="1895" href="Free.State.html#391" class="Function">State</a> <a id="1901" href="Free.html#993" class="Function Operator">⊕</a> <a id="1903" href="Free.Throw.html#229" class="Function">Throw</a> <a id="1909" href="Free.html#993" class="Function Operator">⊕</a> <a id="1911" href="Free.Nil.html#90" class="Function">Nil</a><a id="1914" class="Symbol">)</a>
  <a id="1918" href="Example.Hefty.Catch%252BThrow%252BState.html#1821" class="Function">transact-elab</a> <a id="1932" class="Symbol">=</a> <a id="1934" href="Hefty.Lift.html#520" class="Function">eLift</a> <a id="1940" href="Hefty.html#9816" class="Function Operator">⋎</a> <a id="1942" href="Hefty.Lift.html#520" class="Function">eLift</a> <a id="1948" href="Hefty.html#9816" class="Function Operator">⋎</a> <a id="1950" href="Hefty.Catch.html#1123" class="Function">eCatch</a> <a id="1957" href="Hefty.html#9816" class="Function Operator">⋎</a> <a id="1959" href="Hefty.Nil.html#106" class="Function">eNil</a>

  <a id="GlobalStateInterpretation.transact-elab′"></a><a id="1967" href="Example.Hefty.Catch%252BThrow%252BState.html#1967" class="Function">transact-elab′</a> <a id="1982" class="Symbol">:</a> <a id="1984" href="Hefty.html#9660" class="Function">Elaboration</a> <a id="1996" class="Symbol">(</a><a id="1997" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="2002" href="Free.State.html#391" class="Function">State</a> <a id="2008" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="2010" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="2015" href="Free.Throw.html#229" class="Function">Throw</a> <a id="2021" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="2023" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="2029" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="2031" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="2036" href="Free.Nil.html#90" class="Function">Nil</a><a id="2039" class="Symbol">)</a> <a id="2041" class="Symbol">(</a><a id="2042" href="Free.State.html#391" class="Function">State</a> <a id="2048" href="Free.html#993" class="Function Operator">⊕</a> <a id="2050" href="Free.Throw.html#229" class="Function">Throw</a> <a id="2056" href="Free.html#993" class="Function Operator">⊕</a> <a id="2058" href="Free.Nil.html#90" class="Function">Nil</a><a id="2061" class="Symbol">)</a>
  <a id="2065" href="Example.Hefty.Catch%252BThrow%252BState.html#1967" class="Function">transact-elab′</a> <a id="2080" class="Symbol">=</a> <a id="2082" href="Hefty.html#10194" class="Field">orate</a> <a id="2088" href="Hefty.html#10314" class="Function">auto-elab</a> <a id="2098" class="Comment">-- same as above, but automated</a>
    <a id="2134" class="Keyword">where</a> <a id="2140" class="Keyword">instance</a>
      <a id="2155" href="Example.Hefty.Catch%252BThrow%252BState.html#2155" class="Function">eCatch′</a> <a id="2163" class="Symbol">:</a> <a id="2165" href="Hefty.html#10141" class="Record">Elab</a> <a id="2170" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="2176" class="Symbol">(</a><a id="2177" href="Free.State.html#391" class="Function">State</a> <a id="2183" href="Free.html#993" class="Function Operator">⊕</a> <a id="2185" href="Free.Throw.html#229" class="Function">Throw</a> <a id="2191" href="Free.html#993" class="Function Operator">⊕</a> <a id="2193" href="Free.Nil.html#90" class="Function">Nil</a><a id="2196" class="Symbol">)</a>
      <a id="2204" href="Hefty.html#10194" class="Field">orate</a> <a id="2210" href="Example.Hefty.Catch%252BThrow%252BState.html#2155" class="Function">eCatch′</a> <a id="2218" class="Symbol">=</a> <a id="2220" href="Hefty.Catch.html#1123" class="Function">eCatch</a>


  <a id="2231" class="Comment">{-
  Test showing that the program has a global state semantics
  -}</a>

  <a id="GlobalStateInterpretation.test-transact"></a><a id="2303" href="Example.Hefty.Catch%252BThrow%252BState.html#2303" class="Function">test-transact</a> <a id="2317" class="Symbol">:</a> <a id="2319" href="Free.Nil.html#168" class="Function">un</a> <a id="2322" class="Symbol">(</a> <a id="2324" class="Symbol">(</a> <a id="2326" href="Free.html#7195" class="Function Operator">given</a> <a id="2332" href="Free.Throw.html#432" class="Function">hThrow</a>
                         <a id="2364" href="Free.html#7195" class="Function Operator">handle</a> <a id="2371" class="Symbol">(</a> <a id="2373" class="Symbol">(</a> <a id="2375" href="Free.html#7195" class="Function Operator">given</a> <a id="2381" href="Free.State.html#729" class="Function">hSt</a>
                                    <a id="2421" href="Free.html#7195" class="Function Operator">handle</a> <a id="2428" class="Symbol">(</a><a id="2429" href="Hefty.html#10021" class="Function">elaborate</a> <a id="2439" href="Example.Hefty.Catch%252BThrow%252BState.html#1967" class="Function">transact-elab′</a> <a id="2454" href="Example.Hefty.Catch%252BThrow%252BState.html#1198" class="Function">transact</a><a id="2462" class="Symbol">)</a> <a id="2464" class="Symbol">)</a> <a id="2466" class="Number">0</a><a id="2467" class="Symbol">)</a> <a id="2469" class="Symbol">)</a> <a id="2471" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="2474" class="Symbol">)</a>
                  <a id="2494" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2496" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2501" class="Number">2</a>
  <a id="2505" href="Example.Hefty.Catch%252BThrow%252BState.html#2303" class="Function">test-transact</a> <a id="2519" class="Symbol">=</a> <a id="2521" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>


  <a id="2530" class="Comment">{-
  An alternative elaboration for catch
  -}</a>

  <a id="GlobalStateInterpretation.eCatch₁"></a><a id="2580" href="Example.Hefty.Catch%252BThrow%252BState.html#2580" class="Function">eCatch₁</a> <a id="2588" class="Symbol">:</a> <a id="2590" class="Symbol">⦃</a> <a id="2592" href="Example.Hefty.Catch%252BThrow%252BState.html#2592" class="Bound">u</a> <a id="2594" class="Symbol">:</a> <a id="2596" href="Example.Hefty.Catch%252BThrow%252BState.html#406" class="Function">Universe</a> <a id="2605" class="Symbol">⦄</a> <a id="2607" class="Symbol">⦃</a> <a id="2609" href="Example.Hefty.Catch%252BThrow%252BState.html#2609" class="Bound">w</a> <a id="2611" class="Symbol">:</a> <a id="2613" href="Free.html#882" class="Generalizable">Δ</a> <a id="2615" href="Free.html#3485" class="Datatype Operator">∼</a> <a id="2617" href="Free.Throw.html#229" class="Function">Throw</a> <a id="2623" href="Free.html#3485" class="Datatype Operator">▸</a> <a id="2625" href="Free.html#884" class="Generalizable">Δ′</a> <a id="2628" class="Symbol">⦄</a> <a id="2630" class="Symbol">→</a>  <a id="2633" href="Hefty.html#9660" class="Function">Elaboration</a> <a id="2645" class="Symbol">(</a><a id="2646" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="2652" class="Symbol">⦃</a> <a id="2654" href="Example.Hefty.Catch%252BThrow%252BState.html#1504" class="Function">TypeUniverse</a> <a id="2667" class="Symbol">⦄)</a> <a id="2670" href="Free.html#882" class="Generalizable">Δ</a>
  <a id="2674" href="Hefty.html#2153" class="Field">alg</a> <a id="2678" href="Example.Hefty.Catch%252BThrow%252BState.html#2580" class="Function">eCatch₁</a> <a id="2686" class="Symbol">(</a><a id="2687" href="Hefty.Catch.html#598" class="InductiveConstructor">catch</a> <a id="2693" href="Example.Hefty.Catch%252BThrow%252BState.html#2693" class="Bound">t</a><a id="2694" class="Symbol">)</a> <a id="2696" href="Example.Hefty.Catch%252BThrow%252BState.html#2696" class="Bound">ψ</a> <a id="2698" href="Example.Hefty.Catch%252BThrow%252BState.html#2698" class="Bound">k</a> <a id="2700" class="Symbol">=</a> <a id="2702" class="Symbol">(</a><a id="2703" href="Example.Hefty.Catch%252BThrow%252BState.html#2696" class="Bound">ψ</a> <a id="2705" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="2709" class="Symbol">)</a> <a id="2711" href="Free.html#2048" class="Function Operator">&gt;&gt;=</a> <a id="2715" href="Example.Hefty.Catch%252BThrow%252BState.html#2698" class="Bound">k</a>
    <a id="2721" class="Keyword">where</a> <a id="2727" class="Keyword">open</a> <a id="2732" class="Keyword">import</a> <a id="2739" href="Free.html" class="Module">Free</a> <a id="2744" class="Keyword">using</a> <a id="2750" class="Symbol">(</a><a id="2751" href="Free.html#2048" class="Function Operator">_&gt;&gt;=_</a><a id="2756" class="Symbol">)</a>

  <a id="GlobalStateInterpretation.transact-elab₁"></a><a id="2761" href="Example.Hefty.Catch%252BThrow%252BState.html#2761" class="Function">transact-elab₁</a> <a id="2776" class="Symbol">:</a> <a id="2778" href="Hefty.html#9660" class="Function">Elaboration</a> <a id="2790" class="Symbol">(</a><a id="2791" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="2796" href="Free.State.html#391" class="Function">State</a> <a id="2802" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="2804" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="2809" href="Free.Throw.html#229" class="Function">Throw</a> <a id="2815" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="2817" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="2823" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="2825" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="2830" href="Free.Nil.html#90" class="Function">Nil</a><a id="2833" class="Symbol">)</a> <a id="2835" class="Symbol">(</a><a id="2836" href="Free.State.html#391" class="Function">State</a> <a id="2842" href="Free.html#993" class="Function Operator">⊕</a> <a id="2844" href="Free.Throw.html#229" class="Function">Throw</a> <a id="2850" href="Free.html#993" class="Function Operator">⊕</a> <a id="2852" href="Free.Nil.html#90" class="Function">Nil</a><a id="2855" class="Symbol">)</a>
  <a id="2859" href="Example.Hefty.Catch%252BThrow%252BState.html#2761" class="Function">transact-elab₁</a> <a id="2874" class="Symbol">=</a> <a id="2876" href="Hefty.Lift.html#520" class="Function">eLift</a> <a id="2882" href="Hefty.html#9816" class="Function Operator">⋎</a> <a id="2884" href="Hefty.Lift.html#520" class="Function">eLift</a> <a id="2890" href="Hefty.html#9816" class="Function Operator">⋎</a> <a id="2892" href="Example.Hefty.Catch%252BThrow%252BState.html#2580" class="Function">eCatch₁</a> <a id="2900" href="Hefty.html#9816" class="Function Operator">⋎</a> <a id="2902" href="Hefty.Nil.html#106" class="Function">eNil</a>


  <a id="2911" class="Comment">{-
  An alternative interpretation of the original program, showing that Catch is
  an interface whose operational implementation we can change, modularly.
  -}</a>

  <a id="GlobalStateInterpretation.test-transact₁"></a><a id="3075" href="Example.Hefty.Catch%252BThrow%252BState.html#3075" class="Function">test-transact₁</a> <a id="3090" class="Symbol">:</a> <a id="3092" href="Free.Nil.html#168" class="Function">un</a> <a id="3095" class="Symbol">(</a> <a id="3097" class="Symbol">(</a> <a id="3099" href="Free.html#7195" class="Function Operator">given</a> <a id="3105" href="Free.Throw.html#432" class="Function">hThrow</a>
                         <a id="3137" href="Free.html#7195" class="Function Operator">handle</a> <a id="3144" class="Symbol">(</a> <a id="3146" class="Symbol">(</a> <a id="3148" href="Free.html#7195" class="Function Operator">given</a> <a id="3154" href="Free.State.html#729" class="Function">hSt</a>
                                    <a id="3194" href="Free.html#7195" class="Function Operator">handle</a> <a id="3201" class="Symbol">(</a><a id="3202" href="Hefty.html#10021" class="Function">elaborate</a> <a id="3212" href="Example.Hefty.Catch%252BThrow%252BState.html#2761" class="Function">transact-elab₁</a> <a id="3227" href="Example.Hefty.Catch%252BThrow%252BState.html#1198" class="Function">transact</a><a id="3235" class="Symbol">)</a> <a id="3237" class="Symbol">)</a> <a id="3239" class="Number">0</a><a id="3240" class="Symbol">)</a> <a id="3242" class="Symbol">)</a> <a id="3244" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="3247" class="Symbol">)</a>
                   <a id="3268" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3270" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
  <a id="3280" href="Example.Hefty.Catch%252BThrow%252BState.html#3075" class="Function">test-transact₁</a> <a id="3295" class="Symbol">=</a> <a id="3297" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>


<a id="3304" class="Comment">{-
An optionally-transactional state interpretation of the program
-}</a>

<a id="3375" class="Keyword">module</a> <a id="TransactionalStateInterpretation"></a><a id="3382" href="Example.Hefty.Catch%252BThrow%252BState.html#3382" class="Module">TransactionalStateInterpretation</a> <a id="3415" class="Keyword">where</a>

  <a id="3424" class="Keyword">open</a> <a id="3429" href="Function.Bundles.html#6049" class="Module">Inverse</a> <a id="3437" class="Symbol">⦃</a> <a id="3439" class="Symbol">...</a> <a id="3443" class="Symbol">⦄</a>

  <a id="TransactionalStateInterpretation.transact-elab₂"></a><a id="3448" href="Example.Hefty.Catch%252BThrow%252BState.html#3448" class="Function">transact-elab₂</a> <a id="3463" class="Symbol">:</a> <a id="3465" href="Hefty.html#10141" class="Record">Elab</a>  <a id="3471" class="Symbol">(</a><a id="3472" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="3477" href="Free.State.html#391" class="Function">State</a> <a id="3483" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="3485" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="3490" href="Free.Throw.html#229" class="Function">Throw</a> <a id="3496" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="3498" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="3504" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="3506" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="3511" href="Free.Nil.html#90" class="Function">Nil</a><a id="3514" class="Symbol">)</a>
                         <a id="3541" class="Symbol">(</a><a id="3542" href="Free.SubJump.html#668" class="Function">CC</a> <a id="3545" class="Symbol">(λ</a> <a id="3548" href="Example.Hefty.Catch%252BThrow%252BState.html#3548" class="Bound">t</a> <a id="3550" class="Symbol">→</a> <a id="3552" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟦</a> <a id="3554" href="Example.Hefty.Catch%252BThrow%252BState.html#3548" class="Bound">t</a> <a id="3556" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟧</a> <a id="3558" class="Symbol">→</a> <a id="3560" href="Free.html#1508" class="Datatype">Free</a> <a id="3565" href="Free.Nil.html#90" class="Function">Nil</a> <a id="3569" href="Free.html#469" class="Generalizable">A</a><a id="3570" class="Symbol">)</a> <a id="3572" href="Free.html#993" class="Function Operator">⊕</a> <a id="3574" href="Free.State.html#391" class="Function">State</a> <a id="3580" href="Free.html#993" class="Function Operator">⊕</a> <a id="3582" href="Free.Throw.html#229" class="Function">Throw</a> <a id="3588" href="Free.html#993" class="Function Operator">⊕</a> <a id="3590" href="Free.Nil.html#90" class="Function">Nil</a><a id="3593" class="Symbol">)</a>
  <a id="3597" href="Example.Hefty.Catch%252BThrow%252BState.html#3448" class="Function">transact-elab₂</a> <a id="3612" class="Symbol">=</a> <a id="3614" href="Hefty.html#10314" class="Function">auto-elab</a>
    <a id="3628" class="Keyword">where</a> <a id="3634" class="Keyword">instance</a>
      <a id="3649" href="Example.Hefty.Catch%252BThrow%252BState.html#3649" class="Function">eCatchCC′</a> <a id="3659" class="Symbol">:</a> <a id="3661" href="Hefty.html#10141" class="Record">Elab</a> <a id="3666" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="3672" class="Symbol">_</a>
      <a id="3680" href="Hefty.html#10194" class="Field">orate</a> <a id="3686" href="Example.Hefty.Catch%252BThrow%252BState.html#3649" class="Function">eCatchCC′</a> <a id="3696" class="Symbol">=</a> <a id="3698" href="Hefty.Catch.html#1829" class="Function">eCatchCC</a>

  <a id="TransactionalStateInterpretation.transact-elab₃"></a><a id="3710" href="Example.Hefty.Catch%252BThrow%252BState.html#3710" class="Function">transact-elab₃</a> <a id="3725" class="Symbol">:</a> <a id="3727" href="Hefty.html#10141" class="Record">Elab</a> <a id="3732" class="Symbol">(</a><a id="3733" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="3738" href="Free.State.html#391" class="Function">State</a> <a id="3744" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="3746" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="3751" href="Free.Throw.html#229" class="Function">Throw</a> <a id="3757" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="3759" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="3765" href="Hefty.html#1156" class="Function Operator">∔</a> <a id="3767" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="3772" href="Free.Nil.html#90" class="Function">Nil</a><a id="3775" class="Symbol">)</a>
                        <a id="3801" class="Symbol">(</a><a id="3802" href="Free.SubJump.html#668" class="Function">CC</a> <a id="3805" class="Symbol">(λ</a> <a id="3808" href="Example.Hefty.Catch%252BThrow%252BState.html#3808" class="Bound">t</a> <a id="3810" class="Symbol">→</a> <a id="3812" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟦</a> <a id="3814" href="Example.Hefty.Catch%252BThrow%252BState.html#3808" class="Bound">t</a> <a id="3816" href="Example.Hefty.Catch%252BThrow%252BState.html#471" class="Field Operator">⟧</a> <a id="3818" class="Symbol">→</a> <a id="3820" href="Free.html#1508" class="Datatype">Free</a> <a id="3825" class="Symbol">(</a><a id="3826" href="Free.State.html#391" class="Function">State</a> <a id="3832" href="Free.html#993" class="Function Operator">⊕</a> <a id="3834" href="Free.Nil.html#90" class="Function">Nil</a><a id="3837" class="Symbol">)</a> <a id="3839" href="Free.html#469" class="Generalizable">A</a><a id="3840" class="Symbol">)</a> <a id="3842" href="Free.html#993" class="Function Operator">⊕</a> <a id="3844" href="Free.State.html#391" class="Function">State</a> <a id="3850" href="Free.html#993" class="Function Operator">⊕</a> <a id="3852" href="Free.Throw.html#229" class="Function">Throw</a> <a id="3858" href="Free.html#993" class="Function Operator">⊕</a> <a id="3860" href="Free.Nil.html#90" class="Function">Nil</a><a id="3863" class="Symbol">)</a>
  <a id="3867" href="Example.Hefty.Catch%252BThrow%252BState.html#3710" class="Function">transact-elab₃</a> <a id="3882" class="Symbol">=</a> <a id="3884" href="Hefty.html#10314" class="Function">auto-elab</a>
    <a id="3898" class="Keyword">where</a> <a id="3904" class="Keyword">instance</a>
      <a id="3919" href="Example.Hefty.Catch%252BThrow%252BState.html#3919" class="Function">eCatchCC′</a> <a id="3929" class="Symbol">:</a> <a id="3931" href="Hefty.html#10141" class="Record">Elab</a> <a id="3936" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="3942" class="Symbol">_</a>
      <a id="3950" href="Hefty.html#10194" class="Field">orate</a> <a id="3956" href="Example.Hefty.Catch%252BThrow%252BState.html#3919" class="Function">eCatchCC′</a> <a id="3966" class="Symbol">=</a> <a id="3968" href="Hefty.Catch.html#1829" class="Function">eCatchCC</a>


  <a id="3981" class="Comment">{-
  Running the state handler before throw gives a transactional state interpretation
  -}</a>

  <a id="TransactionalStateInterpretation.test-transact₂"></a><a id="4076" href="Example.Hefty.Catch%252BThrow%252BState.html#4076" class="Function">test-transact₂</a> <a id="4091" class="Symbol">:</a>  <a id="4094" href="Free.Nil.html#168" class="Function">un</a> <a id="4097" class="Symbol">(</a> <a id="4099" class="Symbol">(</a> <a id="4101" href="Free.html#7195" class="Function Operator">given</a> <a id="4107" href="Free.SubJump.html#1238" class="Function">hCC</a>
                           <a id="4138" href="Free.html#7195" class="Function Operator">handle</a> <a id="4145" class="Symbol">(</a> <a id="4147" href="Free.html#7195" class="Function Operator">given</a> <a id="4153" href="Free.Throw.html#432" class="Function">hThrow</a>
                                    <a id="4196" href="Free.html#7195" class="Function Operator">handle</a> <a id="4203" class="Symbol">(</a> <a id="4205" class="Symbol">(</a> <a id="4207" href="Free.html#7195" class="Function Operator">given</a> <a id="4213" href="Free.State.html#729" class="Function">hSt</a>
                                               <a id="4264" href="Free.html#7195" class="Function Operator">handle</a> <a id="4271" class="Symbol">(</a><a id="4272" href="Hefty.html#10237" class="Function">elab</a> <a id="4277" href="Example.Hefty.Catch%252BThrow%252BState.html#3448" class="Function">transact-elab₂</a> <a id="4292" href="Example.Hefty.Catch%252BThrow%252BState.html#1198" class="Function">transact</a><a id="4300" class="Symbol">)</a> <a id="4302" class="Symbol">)</a> <a id="4304" class="Number">0</a><a id="4305" class="Symbol">)</a> <a id="4307" class="Symbol">)</a> <a id="4309" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="4312" class="Symbol">)</a> <a id="4314" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="4317" class="Symbol">)</a>
                      <a id="4341" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4343" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="4348" class="Number">1</a>
  <a id="4352" href="Example.Hefty.Catch%252BThrow%252BState.html#4076" class="Function">test-transact₂</a> <a id="4367" class="Symbol">=</a> <a id="4369" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="4377" class="Comment">{-
  Running the throw handler before the state handler gives a global state interpretation
  -}</a>

  <a id="TransactionalStateInterpretation.test-transact₃"></a><a id="4477" href="Example.Hefty.Catch%252BThrow%252BState.html#4477" class="Function">test-transact₃</a> <a id="4492" class="Symbol">:</a>  <a id="4495" href="Free.Nil.html#168" class="Function">un</a> <a id="4498" class="Symbol">(</a> <a id="4500" class="Symbol">(</a> <a id="4502" href="Free.html#7195" class="Function Operator">given</a> <a id="4508" href="Free.State.html#729" class="Function">hSt</a>
                           <a id="4539" href="Free.html#7195" class="Function Operator">handle</a> <a id="4546" class="Symbol">(</a> <a id="4548" href="Free.html#7195" class="Function Operator">given</a> <a id="4554" href="Free.SubJump.html#1238" class="Function">hCC</a>
                                    <a id="4594" href="Free.html#7195" class="Function Operator">handle</a> <a id="4601" class="Symbol">(</a> <a id="4603" class="Symbol">(</a> <a id="4605" href="Free.html#7195" class="Function Operator">given</a> <a id="4611" href="Free.Throw.html#432" class="Function">hThrow</a>
                                               <a id="4665" href="Free.html#7195" class="Function Operator">handle</a> <a id="4672" class="Symbol">(</a><a id="4673" href="Hefty.html#10237" class="Function">elab</a> <a id="4678" href="Example.Hefty.Catch%252BThrow%252BState.html#3710" class="Function">transact-elab₃</a> <a id="4693" href="Example.Hefty.Catch%252BThrow%252BState.html#1198" class="Function">transact</a><a id="4701" class="Symbol">)</a> <a id="4703" class="Symbol">)</a> <a id="4705" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="4707" class="Symbol">)</a> <a id="4709" class="Symbol">)</a> <a id="4711" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="4714" class="Symbol">)</a> <a id="4716" class="Number">0</a> <a id="4718" class="Symbol">)</a>
                      <a id="4742" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4744" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="4749" class="Number">2</a>
  <a id="4753" href="Example.Hefty.Catch%252BThrow%252BState.html#4477" class="Function">test-transact₃</a> <a id="4768" class="Symbol">=</a> <a id="4770" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>


  <a id="4779" class="Comment">{-
  More tests
  -}</a>

  <a id="TransactionalStateInterpretation.transact′"></a><a id="4803" href="Example.Hefty.Catch%252BThrow%252BState.html#4803" class="Function">transact′</a> <a id="4813" class="Symbol">:</a> <a id="4815" class="Symbol">⦃</a> <a id="4817" href="Example.Hefty.Catch%252BThrow%252BState.html#4817" class="Bound">wₛ</a> <a id="4820" class="Symbol">:</a> <a id="4822" href="Hefty.html#1027" class="Generalizable">H</a> <a id="4824" href="Hefty.html#4021" class="Datatype Operator">∼</a> <a id="4826" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="4831" href="Free.State.html#391" class="Function">State</a> <a id="4837" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="4839" href="Hefty.html#1029" class="Generalizable">H′</a> <a id="4842" class="Symbol">⦄</a> <a id="4844" class="Symbol">⦃</a> <a id="4846" href="Example.Hefty.Catch%252BThrow%252BState.html#4846" class="Bound">wₜ</a> <a id="4849" class="Symbol">:</a> <a id="4851" href="Hefty.html#1027" class="Generalizable">H</a> <a id="4853" href="Hefty.html#4021" class="Datatype Operator">∼</a>  <a id="4856" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="4861" href="Free.Throw.html#229" class="Function">Throw</a> <a id="4867" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="4869" href="Hefty.html#1032" class="Generalizable">H″</a> <a id="4872" class="Symbol">⦄</a> <a id="4874" class="Symbol">⦃</a> <a id="4876" href="Example.Hefty.Catch%252BThrow%252BState.html#4876" class="Bound">w</a>  <a id="4879" class="Symbol">:</a> <a id="4881" href="Hefty.html#1027" class="Generalizable">H</a> <a id="4883" href="Hefty.html#4021" class="Datatype Operator">∼</a> <a id="4885" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="4891" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="4893" href="Hefty.html#1035" class="Generalizable">H‴</a> <a id="4896" class="Symbol">⦄</a>
            <a id="4910" class="Symbol">→</a> <a id="4912" href="Hefty.html#1799" class="Datatype">Hefty</a> <a id="4918" href="Hefty.html#1027" class="Generalizable">H</a> <a id="4920" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="4924" href="Example.Hefty.Catch%252BThrow%252BState.html#4803" class="Function">transact′</a> <a id="4934" class="Symbol">=</a> <a id="4936" class="Keyword">do</a>
    <a id="4943" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="4945" href="Free.State.html#306" class="InductiveConstructor">put</a> <a id="4949" class="Number">1</a>
    <a id="4955" href="Hefty.Catch.html#837" class="Function">‵catch</a> <a id="4962" class="Symbol">(</a><a id="4963" class="Keyword">do</a> <a id="4966" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="4968" href="Free.State.html#306" class="InductiveConstructor">put</a> <a id="4972" class="Number">2</a><a id="4973" class="Symbol">)</a> <a id="4975" class="Symbol">(</a><a id="4976" href="Hefty.html#1843" class="InductiveConstructor">pure</a> <a id="4981" class="Symbol">(</a><a id="4982" href="Function.Bundles.html#6127" class="Field">from</a> <a id="4987" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="4989" class="Symbol">))</a>
    <a id="4996" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="4998" href="Free.State.html#326" class="InductiveConstructor">get</a>
    <a id="5006" class="Keyword">where</a> <a id="5012" class="Keyword">open</a> <a id="5017" class="Keyword">import</a> <a id="5024" href="Hefty.html" class="Module">Hefty</a> <a id="5030" class="Keyword">using</a> <a id="5036" class="Symbol">(</a><a id="5037" href="Hefty.html#2901" class="Function Operator">_&gt;&gt;_</a><a id="5041" class="Symbol">)</a>

  <a id="TransactionalStateInterpretation.test-transact₂′"></a><a id="5046" href="Example.Hefty.Catch%252BThrow%252BState.html#5046" class="Function">test-transact₂′</a> <a id="5062" class="Symbol">:</a> <a id="5064" href="Free.Nil.html#168" class="Function">un</a> <a id="5067" class="Symbol">(</a> <a id="5069" class="Symbol">(</a> <a id="5071" href="Free.html#7195" class="Function Operator">given</a> <a id="5077" href="Free.SubJump.html#1238" class="Function">hCC</a>
                           <a id="5108" href="Free.html#7195" class="Function Operator">handle</a> <a id="5115" class="Symbol">(</a> <a id="5117" href="Free.html#7195" class="Function Operator">given</a> <a id="5123" href="Free.Throw.html#432" class="Function">hThrow</a>
                                    <a id="5166" href="Free.html#7195" class="Function Operator">handle</a> <a id="5173" class="Symbol">(</a> <a id="5175" class="Symbol">(</a> <a id="5177" href="Free.html#7195" class="Function Operator">given</a> <a id="5183" href="Free.State.html#729" class="Function">hSt</a>
                                               <a id="5234" href="Free.html#7195" class="Function Operator">handle</a> <a id="5241" class="Symbol">(</a><a id="5242" href="Hefty.html#10237" class="Function">elab</a> <a id="5247" href="Example.Hefty.Catch%252BThrow%252BState.html#3448" class="Function">transact-elab₂</a> <a id="5262" href="Example.Hefty.Catch%252BThrow%252BState.html#4803" class="Function">transact′</a><a id="5271" class="Symbol">)</a> <a id="5273" class="Symbol">)</a> <a id="5275" class="Number">0</a><a id="5276" class="Symbol">)</a> <a id="5278" class="Symbol">)</a> <a id="5280" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="5283" class="Symbol">)</a> <a id="5285" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="5288" class="Symbol">)</a>
                      <a id="5312" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5314" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="5319" class="Number">2</a>
  <a id="5323" href="Example.Hefty.Catch%252BThrow%252BState.html#5046" class="Function">test-transact₂′</a> <a id="5339" class="Symbol">=</a> <a id="5341" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="TransactionalStateInterpretation.test-transact₃′"></a><a id="5349" href="Example.Hefty.Catch%252BThrow%252BState.html#5349" class="Function">test-transact₃′</a> <a id="5365" class="Symbol">:</a> <a id="5367" href="Free.Nil.html#168" class="Function">un</a> <a id="5370" class="Symbol">(</a> <a id="5372" class="Symbol">(</a> <a id="5374" href="Free.html#7195" class="Function Operator">given</a> <a id="5380" href="Free.State.html#729" class="Function">hSt</a>
                           <a id="5411" href="Free.html#7195" class="Function Operator">handle</a> <a id="5418" class="Symbol">(</a> <a id="5420" href="Free.html#7195" class="Function Operator">given</a> <a id="5426" href="Free.SubJump.html#1238" class="Function">hCC</a>
                                    <a id="5466" href="Free.html#7195" class="Function Operator">handle</a> <a id="5473" class="Symbol">(</a> <a id="5475" class="Symbol">(</a> <a id="5477" href="Free.html#7195" class="Function Operator">given</a> <a id="5483" href="Free.Throw.html#432" class="Function">hThrow</a>
                                               <a id="5537" href="Free.html#7195" class="Function Operator">handle</a> <a id="5544" class="Symbol">(</a><a id="5545" href="Hefty.html#10237" class="Function">elab</a> <a id="5550" href="Example.Hefty.Catch%252BThrow%252BState.html#3710" class="Function">transact-elab₃</a> <a id="5565" href="Example.Hefty.Catch%252BThrow%252BState.html#4803" class="Function">transact′</a><a id="5574" class="Symbol">)</a> <a id="5576" class="Symbol">)</a> <a id="5578" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="5580" class="Symbol">)</a> <a id="5582" class="Symbol">)</a> <a id="5584" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="5587" class="Symbol">)</a> <a id="5589" class="Number">0</a> <a id="5591" class="Symbol">)</a>
                      <a id="5615" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5617" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="5622" class="Number">2</a>
  <a id="5626" href="Example.Hefty.Catch%252BThrow%252BState.html#5349" class="Function">test-transact₃′</a> <a id="5642" class="Symbol">=</a> <a id="5644" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>


  <a id="TransactionalStateInterpretation.transact″"></a><a id="5653" href="Example.Hefty.Catch%252BThrow%252BState.html#5653" class="Function">transact″</a> <a id="5663" class="Symbol">:</a> <a id="5665" class="Symbol">⦃</a> <a id="5667" href="Example.Hefty.Catch%252BThrow%252BState.html#5667" class="Bound">wₛ</a> <a id="5670" class="Symbol">:</a> <a id="5672" href="Hefty.html#1027" class="Generalizable">H</a> <a id="5674" href="Hefty.html#4021" class="Datatype Operator">∼</a> <a id="5676" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="5681" href="Free.State.html#391" class="Function">State</a> <a id="5687" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="5689" href="Hefty.html#1029" class="Generalizable">H′</a> <a id="5692" class="Symbol">⦄</a> <a id="5694" class="Symbol">⦃</a> <a id="5696" href="Example.Hefty.Catch%252BThrow%252BState.html#5696" class="Bound">wₜ</a> <a id="5699" class="Symbol">:</a> <a id="5701" href="Hefty.html#1027" class="Generalizable">H</a> <a id="5703" href="Hefty.html#4021" class="Datatype Operator">∼</a>  <a id="5706" href="Hefty.Lift.html#188" class="Function">Lift</a> <a id="5711" href="Free.Throw.html#229" class="Function">Throw</a> <a id="5717" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="5719" href="Hefty.html#1032" class="Generalizable">H″</a> <a id="5722" class="Symbol">⦄</a> <a id="5724" class="Symbol">⦃</a> <a id="5726" href="Example.Hefty.Catch%252BThrow%252BState.html#5726" class="Bound">w</a>  <a id="5729" class="Symbol">:</a> <a id="5731" href="Hefty.html#1027" class="Generalizable">H</a> <a id="5733" href="Hefty.html#4021" class="Datatype Operator">∼</a> <a id="5735" href="Hefty.Catch.html#646" class="Function">Catch</a> <a id="5741" href="Hefty.html#4021" class="Datatype Operator">▹</a> <a id="5743" href="Hefty.html#1035" class="Generalizable">H‴</a> <a id="5746" class="Symbol">⦄</a>
            <a id="5760" class="Symbol">→</a> <a id="5762" href="Hefty.html#1799" class="Datatype">Hefty</a> <a id="5768" href="Hefty.html#1027" class="Generalizable">H</a> <a id="5770" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="5774" href="Example.Hefty.Catch%252BThrow%252BState.html#5653" class="Function">transact″</a> <a id="5784" class="Symbol">=</a> <a id="5786" class="Keyword">do</a>
    <a id="5793" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="5795" href="Free.State.html#306" class="InductiveConstructor">put</a> <a id="5799" class="Number">1</a>
    <a id="5805" href="Hefty.Catch.html#837" class="Function">‵catch</a> <a id="5812" class="Symbol">(</a><a id="5813" class="Keyword">do</a> <a id="5816" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="5818" href="Free.State.html#306" class="InductiveConstructor">put</a> <a id="5822" class="Number">2</a><a id="5823" class="Symbol">;</a> <a id="5825" href="Hefty.Catch.html#1396" class="Function">‵throwᴴ</a><a id="5832" class="Symbol">)</a> <a id="5834" class="Symbol">(</a><a id="5835" href="Hefty.Lift.html#320" class="Function Operator">↑</a> <a id="5837" href="Free.State.html#326" class="InductiveConstructor">get</a><a id="5840" class="Symbol">)</a>
    <a id="5846" class="Keyword">where</a> <a id="5852" class="Keyword">open</a> <a id="5857" class="Keyword">import</a> <a id="5864" href="Hefty.html" class="Module">Hefty</a> <a id="5870" class="Keyword">using</a> <a id="5876" class="Symbol">(</a><a id="5877" href="Hefty.html#2901" class="Function Operator">_&gt;&gt;_</a><a id="5881" class="Symbol">)</a>

  <a id="TransactionalStateInterpretation.test-transact₂″"></a><a id="5886" href="Example.Hefty.Catch%252BThrow%252BState.html#5886" class="Function">test-transact₂″</a> <a id="5902" class="Symbol">:</a> <a id="5904" href="Free.Nil.html#168" class="Function">un</a> <a id="5907" class="Symbol">(</a> <a id="5909" class="Symbol">(</a> <a id="5911" href="Free.html#7195" class="Function Operator">given</a> <a id="5917" href="Free.SubJump.html#1238" class="Function">hCC</a>
                           <a id="5948" href="Free.html#7195" class="Function Operator">handle</a> <a id="5955" class="Symbol">(</a> <a id="5957" href="Free.html#7195" class="Function Operator">given</a> <a id="5963" href="Free.Throw.html#432" class="Function">hThrow</a>
                                    <a id="6006" href="Free.html#7195" class="Function Operator">handle</a> <a id="6013" class="Symbol">(</a> <a id="6015" class="Symbol">(</a> <a id="6017" href="Free.html#7195" class="Function Operator">given</a> <a id="6023" href="Free.State.html#729" class="Function">hSt</a>
                                               <a id="6074" href="Free.html#7195" class="Function Operator">handle</a> <a id="6081" class="Symbol">(</a><a id="6082" href="Hefty.html#10237" class="Function">elab</a> <a id="6087" href="Example.Hefty.Catch%252BThrow%252BState.html#3448" class="Function">transact-elab₂</a> <a id="6102" href="Example.Hefty.Catch%252BThrow%252BState.html#5653" class="Function">transact″</a><a id="6111" class="Symbol">)</a> <a id="6113" class="Symbol">)</a> <a id="6115" class="Number">0</a><a id="6116" class="Symbol">)</a> <a id="6118" class="Symbol">)</a> <a id="6120" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="6123" class="Symbol">)</a> <a id="6125" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="6128" class="Symbol">)</a>
                      <a id="6152" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6154" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="6159" class="Number">1</a>
  <a id="6163" href="Example.Hefty.Catch%252BThrow%252BState.html#5886" class="Function">test-transact₂″</a> <a id="6179" class="Symbol">=</a> <a id="6181" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="TransactionalStateInterpretation.test-transact₃″"></a><a id="6189" href="Example.Hefty.Catch%252BThrow%252BState.html#6189" class="Function">test-transact₃″</a> <a id="6205" class="Symbol">:</a> <a id="6207" href="Free.Nil.html#168" class="Function">un</a> <a id="6210" class="Symbol">(</a> <a id="6212" class="Symbol">(</a> <a id="6214" href="Free.html#7195" class="Function Operator">given</a> <a id="6220" href="Free.State.html#729" class="Function">hSt</a>
                           <a id="6251" href="Free.html#7195" class="Function Operator">handle</a> <a id="6258" class="Symbol">(</a> <a id="6260" href="Free.html#7195" class="Function Operator">given</a> <a id="6266" href="Free.SubJump.html#1238" class="Function">hCC</a>
                                    <a id="6306" href="Free.html#7195" class="Function Operator">handle</a> <a id="6313" class="Symbol">(</a> <a id="6315" class="Symbol">(</a> <a id="6317" href="Free.html#7195" class="Function Operator">given</a> <a id="6323" href="Free.Throw.html#432" class="Function">hThrow</a>
                                               <a id="6377" href="Free.html#7195" class="Function Operator">handle</a> <a id="6384" class="Symbol">(</a><a id="6385" href="Hefty.html#10237" class="Function">elab</a> <a id="6390" href="Example.Hefty.Catch%252BThrow%252BState.html#3710" class="Function">transact-elab₃</a> <a id="6405" href="Example.Hefty.Catch%252BThrow%252BState.html#5653" class="Function">transact″</a><a id="6414" class="Symbol">)</a> <a id="6416" class="Symbol">)</a> <a id="6418" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="6420" class="Symbol">)</a> <a id="6422" class="Symbol">)</a> <a id="6424" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="6427" class="Symbol">)</a> <a id="6429" class="Number">0</a> <a id="6431" class="Symbol">)</a>
                      <a id="6455" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6457" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="6462" class="Number">2</a>
  <a id="6466" href="Example.Hefty.Catch%252BThrow%252BState.html#6189" class="Function">test-transact₃″</a> <a id="6482" class="Symbol">=</a> <a id="6484" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre></body></html>